name: Cleanup All Code Scanning Alerts

on:
  workflow_dispatch:   # Run manually from GitHub UI

jobs:
  cleanup:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Generate Empty SARIF
        run: |
          cat << 'EOF' > empty.sarif
          {
            "version": "2.1.0",
            "$schema": "https://json.schemastore.org/sarif-2.1.0.json",
            "runs": [
              {
                "tool": {
                  "driver": {
                    "name": "CleanupRun",
                    "informationUri": "https://example.com"
                  }
                },
                "results": []
              }
            ]
          }
          EOF

      - name: Upload Empty SARIF (clears all alerts)
        uses: github/codeql-action/upload-sarif@v4
        with:
          sarif_file: empty.sarif
